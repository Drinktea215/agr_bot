## Телеграм бот для агригирования данных
### Как запустить?
Чтобы запустить проект, склонируйте репозиторий и создайте в корне проекта файл `.env`
В нем разместите следующие переменные окружения (и задайте им значения):
- DB_HOST
- DB_PORT
- DB_NAME
- DB_COLL
- TELEGA_TOKEN

Выполните команду `docker-compose up --build -d`.
В результате выполнения команды будут развернуты и запущены два контейнера: mongodb и app_bot.

Чтобы протестировать работу алгоритма присвойте переменной `DB_HOST` значение `localhost`, так как тестирование будет происходить не внутри контейнера.

Установите зависимости, выполнив команду `pip install -r requirements.txt`

Для запуска теста выполните команду `pytest test.py`

### Как использльвать?
Бот принимает следующие данные:
1. Дату и время старта агрегации в ISO формате (далее dt_from)
2. Дату и время окончания агрегации в ISO формате (далее dt_upto)
3. Тип агрегации (далее group_type). Типы агрегации могут быть следующие: hour, day, month. То есть группировка всех данных за час, день, неделю, месяц.

#### Пример входных данных:

```
{
    "dt_from":"2022-09-01T00:00:00",
    "dt_upto":"2022-12-31T23:59:00",
    "group_type":"month"
}
```

В ответ вы получите:
1. Агрегированный массив данных (далее dataset)
2. Подписи к значениям агрегированного массива данных в ISO формате (далее labels)

#### Пример ответа:

```
{
    "dataset": [5906586, 5515874, 5889803, 6092634],
    "labels": ["2022-09-01T00:00:00", "2022-10-01T00:00:00", "2022-11-01T00:00:00", "2022-12-01T00:00:00"]
}
```
